{"ast":null,"code":"var _jsxFileName = \"/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeStatic.js\";\nimport React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport \"./three.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet scene; //= new THREE.Scene();\n\nlet camera; // = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\n\nlet renderer; // = new THREE.WebGLRenderer( { alpha: true } );\n\nvar myObjPromise;\nconst circle = new THREE.TextureLoader().load('./data/circle.png');\n\nclass ThreeStatic extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeId: props.dataAppToThreeStatic\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    return {\n      activeId: props.dataAppToThreeStatic\n    };\n  }\n\n  threeObject() {\n    scene = new THREE.Scene();\n    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000);\n    renderer = new THREE.WebGLRenderer({\n      alpha: true\n    });\n    camera.position.z = 250;\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setClearColor(0x000000, 0);\n    this.mount.appendChild(renderer.domElement);\n    var activeId = this.state.activeId;\n    var mouseX = 0,\n        mouseY = 0;\n    var windowHalfX = window.innerWidth / 2;\n    var windowHalfY = window.innerHeight / 2; //\n    //\n    // OBJ LOADER & MODEL SETUP\n\n    var loadModel = function (url) {\n      return new Promise(resolve => {\n        new OBJLoader().load(url, resolve);\n      });\n    }; // var myObjPromise;\n\n\n    if (activeId % 7 === 0) {\n      myObjPromise = loadModel('./data/strom-61669.obj');\n    } else if (activeId % 7 === 1) {\n      myObjPromise = loadModel('./data/lavicka-61186.obj');\n    } else if (activeId % 3 === 2) {\n      myObjPromise = loadModel('./data/pozor-48737.obj');\n    } else if (activeId % 7 === 3) {\n      myObjPromise = loadModel('./data/1.obj');\n    } else if (activeId % 7 === 4) {\n      myObjPromise = loadModel('./data/2.obj');\n    } else if (activeId % 7 === 5) {\n      myObjPromise = loadModel('./data/3.obj');\n    } else {\n      myObjPromise = loadModel('./data/4.obj');\n    }\n\n    myObjPromise.then(myObj => {\n      var material = myObj.children[0].material; // const circle = new THREE.TextureLoader().load( './data/circle.png' );\n\n      material.size = 3;\n      material.sizeAttenuation = true;\n      material.map = circle;\n      material.alphaTest = 0.5;\n      material.transparent = true;\n      myObj.scale.x = 100;\n      myObj.scale.y = 100;\n      myObj.scale.z = 100;\n      scene.add(myObj);\n      material.dispose();\n    }); //\n    //\n    // HELPER FUNCTIONS\n\n    var onWindowResize = function () {\n      windowHalfX = window.innerWidth / 2;\n      windowHalfY = window.innerHeight / 2;\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n\n    var onDocumentMouseMove = function (event) {\n      mouseX = (-event.clientX + windowHalfX) / 2;\n      mouseY = (-event.clientY + windowHalfY) / 2;\n    };\n\n    document.addEventListener('mousemove', onDocumentMouseMove);\n    window.addEventListener('resize', onWindowResize); //\n    //\n    // ANIMATE\n\n    var animate = function () {\n      requestAnimationFrame(animate);\n      camera.position.x += (mouseX - camera.position.x) * .05;\n      camera.position.y += (-mouseY - camera.position.y) * .05;\n      camera.lookAt(scene.position);\n      renderer.render(scene, camera);\n    };\n\n    animate();\n  }\n\n  dispose() {\n    myObjPromise.then(myObj => {\n      if (scene) {\n        scene.remove(myObj);\n      }\n\n      if (myObj.geometry) {\n        myObj.geometry.dispose();\n      }\n\n      if (myObj.material) {\n        if (myObj.material.length) {\n          for (let i = 0; i < myObj.material.length; ++i) {\n            myObj.material[i].dispose();\n          }\n        } else {\n          myObj.material.dispose();\n        }\n      }\n    }); //renderer.renderLists.dispose();\n\n    renderer && renderer.renderLists.dispose();\n    renderer && renderer.dispose(); //renderer.domElement.parentElement.removeChild(renderer.domElement);\t\t\n\n    this.mount.removeChild(renderer.domElement);\n    myObjPromise = null;\n    scene = null;\n    camera = null;\n    renderer = null;\n  }\n\n  componentDidMount() {\n    if (myObjPromise) {\n      this.dispose();\n    }\n\n    this.threeObject();\n  }\n\n  componentDidUpdate() {\n    this.dispose();\n    this.threeObject();\n  }\n\n  componentWillUnmount() {\n    this.dispose();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref => this.mount = ref,\n      className: \"object\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ThreeStatic;","map":{"version":3,"sources":["/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeStatic.js"],"names":["React","THREE","OBJLoader","scene","camera","renderer","myObjPromise","circle","TextureLoader","load","ThreeStatic","Component","constructor","props","state","activeId","dataAppToThreeStatic","getDerivedStateFromProps","threeObject","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","alpha","position","z","setSize","setPixelRatio","devicePixelRatio","setClearColor","mount","appendChild","domElement","mouseX","mouseY","windowHalfX","windowHalfY","loadModel","url","Promise","resolve","then","myObj","material","children","size","sizeAttenuation","map","alphaTest","transparent","scale","x","y","add","dispose","onWindowResize","aspect","updateProjectionMatrix","onDocumentMouseMove","event","clientX","clientY","document","addEventListener","animate","requestAnimationFrame","lookAt","render","remove","geometry","length","i","renderLists","removeChild","componentDidMount","componentDidUpdate","componentWillUnmount","ref"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport \"./three.css\";\n\nlet scene; //= new THREE.Scene();\nlet camera; // = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\nlet renderer; // = new THREE.WebGLRenderer( { alpha: true } );\n\nvar myObjPromise;\n\nconst circle = new THREE.TextureLoader().load( './data/circle.png' );\n\nclass ThreeStatic extends React.Component {\n\n    constructor(props) {\n        super(props); \n        this.state = {\n            activeId: props.dataAppToThreeStatic,\n        }\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return {activeId: props.dataAppToThreeStatic}\n    }\n\n    threeObject() {\n        scene = new THREE.Scene();\n        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\n        renderer = new THREE.WebGLRenderer( { alpha: true } );\n\n        camera.position.z =250;\n\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setClearColor( 0x000000, 0);\n\n        this.mount.appendChild( renderer.domElement );\n\n        var activeId = this.state.activeId;\n\n        var mouseX = 0, mouseY = 0;\n        var windowHalfX = window.innerWidth / 2;\n        var windowHalfY = window.innerHeight / 2;\n\n        //\n        //\n        // OBJ LOADER & MODEL SETUP\n\n        var loadModel = function(url) {\n            return new Promise(resolve => {\n                new OBJLoader().load(url, resolve);\n            }); \n        }\n\n        // var myObjPromise;\n\n        if (activeId % 7 === 0) {\n            myObjPromise = loadModel('./data/strom-61669.obj');\n        } else if (activeId % 7 === 1) {\n            myObjPromise = loadModel('./data/lavicka-61186.obj');\n        } else if (activeId % 3 === 2) {\n            myObjPromise = loadModel('./data/pozor-48737.obj');\n        } else if (activeId % 7 === 3) {\n            myObjPromise = loadModel('./data/1.obj');\n        } else if (activeId % 7 === 4) {\n            myObjPromise = loadModel('./data/2.obj');\n        } else if (activeId % 7 === 5) {\n            myObjPromise = loadModel('./data/3.obj');\n        } else {\n            myObjPromise = loadModel('./data/4.obj');\n        }\n\n        myObjPromise.then(myObj => {\n            var material = myObj.children[0].material;\n\n            // const circle = new THREE.TextureLoader().load( './data/circle.png' );\n\n            material.size = 3;\n            material.sizeAttenuation = true;\n            material.map = circle;\n            material.alphaTest = 0.5;\n            material.transparent = true;\n\n            myObj.scale.x = 100;\n            myObj.scale.y = 100;\n            myObj.scale.z = 100;\n\n            scene.add(myObj);\n            material.dispose();\n        });\n\n        //\n        //\n        // HELPER FUNCTIONS\n\n        var onWindowResize = function() {\n            windowHalfX = window.innerWidth / 2;\n            windowHalfY = window.innerHeight / 2;\n        \n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n        \n            renderer.setSize( window.innerWidth, window.innerHeight );\n        }\n        \n        var onDocumentMouseMove = function(event) {\n            mouseX = ( - event.clientX + windowHalfX ) / 2;\n            mouseY = ( - event.clientY + windowHalfY ) / 2;\n        }\n\n        document.addEventListener( 'mousemove', onDocumentMouseMove );\n        window.addEventListener( 'resize', onWindowResize );\n        \n        //\n        //\n        // ANIMATE\n\n        var animate = function () {\n            requestAnimationFrame( animate );\n\n            camera.position.x += ( mouseX - camera.position.x ) * .05;\n            camera.position.y += ( - mouseY - camera.position.y ) * .05;\n\n            camera.lookAt( scene.position );\n\n            renderer.render( scene, camera );\n        };\n\n        animate();\n    }\n\n    dispose() {\n        myObjPromise.then(myObj => {\n            if (scene) {\n                scene.remove(myObj);\n            }\n\n            if (myObj.geometry) {\n                myObj.geometry.dispose()\t\t\t\t\t                 \n            }\n\n            if (myObj.material) {\n                if (myObj.material.length) {\n                    for (let i = 0; i < myObj.material.length; ++i) {\n                        myObj.material[i].dispose()\t\t\t\t\t\t\t\n                    }\n                }\n                else {\n                    myObj.material.dispose()\t\t\t\t\t\t\n                }\n            }\n        });\n\n        //renderer.renderLists.dispose();\n        renderer && renderer.renderLists.dispose();\n        renderer && renderer.dispose();\n\n        //renderer.domElement.parentElement.removeChild(renderer.domElement);\t\t\n        this.mount.removeChild( renderer.domElement );\n\t\t\t\n        myObjPromise = null;\n\t\tscene = null;\n        camera = null;\n        renderer = null;\n    }\n\n    componentDidMount() {\n        if (myObjPromise) {\n            this.dispose();\n        }\n        this.threeObject();\n    }\n\n    componentDidUpdate() {\n        this.dispose();\n        this.threeObject()\n    }\n\n    componentWillUnmount() {\n        this.dispose();\n    }\n\n    render() {\n        return (\n            <div ref={ref => (this.mount = ref)} className = \"object\"/>\n        )\n    } \n}\n\nexport default ThreeStatic;"]},"metadata":{},"sourceType":"module"}