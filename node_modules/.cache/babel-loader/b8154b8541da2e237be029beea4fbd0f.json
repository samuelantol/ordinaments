{"ast":null,"code":"var _jsxFileName = \"/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeStatic.js\";\nimport React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport \"./three.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ThreeStatic extends React.Component {\n  //let scene = new THREE.Scene();\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeId: props.dataAppToThreeStatic,\n      scene: new THREE.Scene(),\n      camera: new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000),\n      renderer: new THREE.WebGLRenderer()\n    };\n    this.state.camera.position.z = 250;\n    this.state.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.state.renderer.setPixelRatio(window.devicePixelRatio);\n    this.state.renderer.setClearColor(0x000000, 1); //console.log(this.state);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    //console.log(props.dataAppToThreeStatic);\n    return {\n      activeId: props.dataAppToThreeStatic\n    };\n  }\n\n  threeObject() {\n    var scene = this.state.scene;\n    var camera = this.state.camera;\n    var renderer = this.state.renderer;\n    this.mount.appendChild(this.state.renderer.domElement);\n    var activeId = this.state.activeId;\n    console.log(activeId);\n    var mouseX = 0,\n        mouseY = 0;\n    var windowHalfX = window.innerWidth / 2;\n    var windowHalfY = window.innerHeight / 2; //\n    //\n    // OBJ LOADER & MODEL SETUP\n\n    var loadModel = function (url) {\n      return new Promise(resolve => {\n        new OBJLoader().load(url, resolve);\n      });\n    };\n\n    var myObjPromise;\n\n    if (activeId % 3 === 0) {\n      myObjPromise = loadModel('./data/strom-61669.obj');\n      console.log(\"strom\");\n    } else if (activeId % 3 === 1) {\n      myObjPromise = loadModel('./data/lavicka-61186.obj');\n      console.log(\"lavicka\");\n    } else {\n      myObjPromise = loadModel('./data/pozor-48737.obj');\n      console.log(\"pozor\");\n    }\n\n    myObjPromise.then(myObj => {\n      var material = myObj.children[0].material;\n      const circle = new THREE.TextureLoader().load('./data/circle.png');\n      material.size = 3;\n      material.sizeAttenuation = true;\n      material.map = circle;\n      material.alphaTest = 0.5;\n      material.transparent = true;\n      myObj.scale.x = 100;\n      myObj.scale.y = 100;\n      myObj.scale.z = 100;\n      scene.add(myObj);\n    }); //\n    //\n    // HELPER FUNCTIONS\n\n    var onWindowResize = function () {\n      windowHalfX = window.innerWidth / 2;\n      windowHalfY = window.innerHeight / 2;\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n\n    var onDocumentMouseMove = function (event) {\n      mouseX = (-event.clientX + windowHalfX) / 2;\n      mouseY = (-event.clientY + windowHalfY) / 2;\n    };\n\n    document.addEventListener('mousemove', onDocumentMouseMove);\n    window.addEventListener('resize', onWindowResize); //\n    //\n    // ANIMATE\n\n    var animate = function () {\n      requestAnimationFrame(animate); // myObjPromise.then(myObj => {\n      //   scene.add( myObj );\n      // });\n\n      camera.position.x += (mouseX - camera.position.x) * .05;\n      camera.position.y += (-mouseY - camera.position.y) * .05;\n      camera.lookAt(scene.position);\n      renderer.render(scene, camera);\n    };\n\n    animate();\n  }\n\n  componentDidMount() {\n    this.threeObject();\n  }\n\n  componentDidUpdate() {\n    this.threeObject();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref => this.mount = ref,\n      className: \"object\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ThreeStatic;","map":{"version":3,"sources":["/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeStatic.js"],"names":["React","THREE","OBJLoader","ThreeStatic","Component","constructor","props","state","activeId","dataAppToThreeStatic","scene","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","renderer","WebGLRenderer","position","z","setSize","setPixelRatio","devicePixelRatio","setClearColor","getDerivedStateFromProps","threeObject","mount","appendChild","domElement","console","log","mouseX","mouseY","windowHalfX","windowHalfY","loadModel","url","Promise","resolve","load","myObjPromise","then","myObj","material","children","circle","TextureLoader","size","sizeAttenuation","map","alphaTest","transparent","scale","x","y","add","onWindowResize","aspect","updateProjectionMatrix","onDocumentMouseMove","event","clientX","clientY","document","addEventListener","animate","requestAnimationFrame","lookAt","render","componentDidMount","componentDidUpdate","ref"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport \"./three.css\";\n\nclass ThreeStatic extends React.Component {\n\n    //let scene = new THREE.Scene();\n\n    constructor(props) {\n        super(props); \n        this.state = {\n            activeId: props.dataAppToThreeStatic,\n            scene: new THREE.Scene(),\n            camera: new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 ),\n            renderer: new THREE.WebGLRenderer()\n        }\n        this.state.camera.position.z =250;\n\n        this.state.renderer.setSize( window.innerWidth, window.innerHeight );\n        this.state.renderer.setPixelRatio( window.devicePixelRatio );\n        this.state.renderer.setClearColor( 0x000000, 1);\n        \n        //console.log(this.state);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        //console.log(props.dataAppToThreeStatic);\n        return {activeId: props.dataAppToThreeStatic}\n    }\n\n    threeObject() {\n        var scene = this.state.scene;\n        var camera = this.state.camera;\n        var renderer = this.state.renderer;\n        this.mount.appendChild( this.state.renderer.domElement );\n        var activeId = this.state.activeId;\n        console.log(activeId);\n\n        var mouseX = 0, mouseY = 0;\n        var windowHalfX = window.innerWidth / 2;\n        var windowHalfY = window.innerHeight / 2;\n\n        //\n        //\n        // OBJ LOADER & MODEL SETUP\n\n        var loadModel = function(url) {\n            return new Promise(resolve => {\n                new OBJLoader().load(url, resolve);\n            }); \n        }\n\n        var myObjPromise;\n\n        if (activeId % 3 === 0) {\n            myObjPromise = loadModel('./data/strom-61669.obj');\n            console.log(\"strom\");\n        } else if (activeId % 3 === 1) {\n            myObjPromise = loadModel('./data/lavicka-61186.obj');\n            console.log(\"lavicka\");\n        } else {\n            myObjPromise = loadModel('./data/pozor-48737.obj');\n            console.log(\"pozor\");\n        }\n\n        myObjPromise.then(myObj => {\n            var material = myObj.children[0].material;\n\n            const circle = new THREE.TextureLoader().load( './data/circle.png' );\n\n            material.size = 3;\n            material.sizeAttenuation = true;\n            material.map = circle;\n            material.alphaTest = 0.5;\n            material.transparent = true;\n\n            myObj.scale.x = 100;\n            myObj.scale.y = 100;\n            myObj.scale.z = 100;\n\n            scene.add(myObj);\n        });\n\n        //\n        //\n        // HELPER FUNCTIONS\n\n        var onWindowResize = function() {\n            windowHalfX = window.innerWidth / 2;\n            windowHalfY = window.innerHeight / 2;\n        \n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n        \n            renderer.setSize( window.innerWidth, window.innerHeight );\n        }\n        \n        var onDocumentMouseMove = function(event) {\n            mouseX = ( - event.clientX + windowHalfX ) / 2;\n            mouseY = ( - event.clientY + windowHalfY ) / 2;\n        }\n\n        document.addEventListener( 'mousemove', onDocumentMouseMove );\n        window.addEventListener( 'resize', onWindowResize );\n        \n        //\n        //\n        // ANIMATE\n\n        var animate = function () {\n            requestAnimationFrame( animate );\n            \n            // myObjPromise.then(myObj => {\n            //   scene.add( myObj );\n            // });\n\n            camera.position.x += ( mouseX - camera.position.x ) * .05;\n            camera.position.y += ( - mouseY - camera.position.y ) * .05;\n\n            camera.lookAt( scene.position );\n\n            renderer.render( scene, camera );\n        };\n\n        animate();\n    }\n\n    componentDidMount() {\n        this.threeObject();\n    }\n\n    componentDidUpdate() {\n        this.threeObject()\n    }\n\n    render() {\n        return (\n            <div ref={ref => (this.mount = ref)} className = \"object\"/>\n        )\n    } \n}\n\nexport default ThreeStatic;"]},"metadata":{},"sourceType":"module"}