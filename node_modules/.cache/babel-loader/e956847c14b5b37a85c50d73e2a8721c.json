{"ast":null,"code":"var _jsxFileName = \"/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeMusic.js\";\nimport React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport SimplexNoise from \"simplex-noise\";\nimport \"./three.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ResourceTracker {\n  constructor() {\n    this.resources = new Set();\n  }\n\n  track(resource) {\n    if (!resource) {\n      return resource;\n    } // handle children and when material is an array of materials or\n    // uniform is array of textures\n\n\n    if (Array.isArray(resource)) {\n      resource.forEach(resource => this.track(resource));\n      return resource;\n    }\n\n    if (resource.dispose || resource instanceof THREE.Object3D) {\n      this.resources.add(resource);\n    }\n\n    if (resource instanceof THREE.Object3D) {\n      this.track(resource.geometry);\n      this.track(resource.material);\n      this.track(resource.children);\n    } else if (resource instanceof THREE.Material) {\n      // We have to check if there are any textures on the material\n      for (const value of Object.values(resource)) {\n        if (value instanceof THREE.Texture) {\n          this.track(value);\n        }\n      } // We also have to check if any uniforms reference textures or arrays of textures\n\n\n      if (resource.uniforms) {\n        for (const value of Object.values(resource.uniforms)) {\n          if (value) {\n            const uniformValue = value.value;\n\n            if (uniformValue instanceof THREE.Texture || Array.isArray(uniformValue)) {\n              this.track(uniformValue);\n            }\n          }\n        }\n      }\n    }\n\n    return resource;\n  }\n\n  untrack(resource) {\n    this.resources.delete(resource);\n  }\n\n  dispose() {\n    for (const resource of this.resources) {\n      if (resource instanceof THREE.Object3D) {\n        if (resource.parent) {\n          resource.parent.remove(resource);\n        }\n      }\n\n      if (resource.dispose) {\n        resource.dispose();\n      }\n    }\n\n    this.resources.clear();\n  }\n\n}\n\nlet scene; // = new THREE.Scene();\n\nlet camera; // = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\n\nlet renderer; // = new THREE.WebGLRenderer( { alpha: true } );\n//const resTracker;\n\nvar myObjPromise, myObjPromiseOriginal; // camera.position.z =250;\n// renderer.setSize( window.innerWidth, window.innerHeight );\n// renderer.setPixelRatio( window.devicePixelRatio );\n// renderer.setClearColor( 0x000000, 1);\n\nconst circle = new THREE.TextureLoader().load('./data/circle.png');\n\nclass ThreeStatic extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeId: props.dataAppToThreeStatic // scene: new THREE.Scene(),\n      // camera: new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 ),\n      // renderer: new THREE.WebGLRenderer( { alpha: true } )\n\n    }; // this.state.camera.position.z =250;\n    // this.state.renderer.setSize( window.innerWidth, window.innerHeight );\n    // this.state.renderer.setPixelRatio( window.devicePixelRatio );\n    // this.state.renderer.setClearColor( 0x000000, 1);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    return {\n      activeId: props.dataAppToThreeMusic\n    };\n  }\n\n  threeObject() {\n    scene = new THREE.Scene();\n    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000);\n    renderer = new THREE.WebGLRenderer({\n      alpha: true\n    });\n    const resTracker = new ResourceTracker();\n    const track = resTracker.track.bind(resTracker);\n    camera.position.z = 250;\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setClearColor(0x000000, 1);\n    this.mount.appendChild(renderer.domElement); // this.state.scene = new THREE.Scene();  // TOTO TREBA OPRAVIT\n    // var scene = this.state.scene;\n    // var camera = this.state.camera;\n    // var renderer = this.state.renderer;\n    // this.mount.appendChild( this.state.renderer.domElement );\n\n    var activeId = this.state.activeId;\n    var mouseX = 0,\n        mouseY = 0;\n    var windowHalfX = window.innerWidth / 2;\n    var windowHalfY = window.innerHeight / 2;\n    var noise = new SimplexNoise(); // AUDIO\n\n    var context = new AudioContext();\n    var analyser = context.createAnalyser();\n    analyser.fftSize = 256;\n    analyser.connect(context.destination);\n    var dataArray = new Uint8Array(analyser.frequencyBinCount);\n\n    var callback = function (stream) {\n      var mic = context.createMediaStreamSource(stream);\n      mic.connect(analyser);\n    };\n\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n    navigator.getUserMedia({\n      video: false,\n      audio: true\n    }, callback, console.log); //\n    //\n    // OBJ LOADER & MODEL SETUP\n\n    const objSize = 61669;\n\n    var loadModel = function (url) {\n      return new Promise(resolve => {\n        new OBJLoader().load(url, resolve);\n      });\n    }; // var myObjPromise, myObjPromiseOriginal;\n\n\n    if (activeId % 7 === 0) {\n      myObjPromise = track(loadModel('./data/strom-61669.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/strom-61669.obj'));\n    } else if (activeId % 7 === 1) {\n      myObjPromise = track(loadModel('./data/lavicka-61186.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/lavicka-61186.obj'));\n    } else if (activeId % 3 === 2) {\n      myObjPromise = track(loadModel('./data/pozor-48737.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/pozor-48737.obj'));\n    } else if (activeId % 7 === 3) {\n      myObjPromise = track(loadModel('./data/1.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/1.obj'));\n    } else if (activeId % 7 === 4) {\n      myObjPromise = track(loadModel('./data/2.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/2.obj'));\n    } else if (activeId % 7 === 5) {\n      myObjPromise = track(loadModel('./data/3.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/3.obj'));\n    } else {\n      myObjPromise = track(loadModel('./data/4.obj'));\n      myObjPromiseOriginal = track(loadModel('./data/4.obj'));\n    }\n\n    myObjPromise.then(myObj => {\n      var material = myObj.children[0].material;\n      material.size = 3;\n      material.sizeAttenuation = true;\n      material.map = circle;\n      material.alphaTest = 0.5;\n      material.transparent = true;\n      myObj.scale.x = 100;\n      myObj.scale.y = 100;\n      myObj.scale.z = 100;\n      scene.add(myObj);\n      material.dispose();\n    }); //\n    //\n    // HELPER FUNCTIONS\n\n    var onWindowResize = function () {\n      windowHalfX = window.innerWidth / 2;\n      windowHalfY = window.innerHeight / 2;\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n\n    var onDocumentMouseMove = function (event) {\n      mouseX = (-event.clientX + windowHalfX) / 2;\n      mouseY = (-event.clientY + windowHalfY) / 2;\n    };\n\n    document.addEventListener('mousemove', onDocumentMouseMove);\n    window.addEventListener('resize', onWindowResize);\n\n    var fractionate = function (val, minVal, maxVal) {\n      return (val - minVal) / (maxVal - minVal);\n    };\n\n    var modulate = function (val, minVal, maxVal, outMin, outMax) {\n      var fr = fractionate(val, minVal, maxVal);\n      var delta = outMax - outMin;\n      return outMin + fr * delta;\n    }; //\n    //\n    // ANIMATE\n\n\n    var animate = function () {\n      requestAnimationFrame(animate);\n      analyser.getByteFrequencyData(dataArray);\n      var lowerHalfArray = dataArray.slice(0, dataArray.length / 2 - 1); // var upperHalfArray = dataArray.slice((dataArray.length/2) - 1, dataArray.length - 1);\n\n      var lowerSum = lowerHalfArray.reduce((a, b) => a + b, 0);\n      var lowerLength = lowerHalfArray.length;\n      var lowerAvg = lowerSum / lowerLength || 0;\n      var lowerAvgFr = lowerAvg / lowerLength;\n      var distortionFr = modulate(lowerAvgFr, 0, 1, 0, 4);\n      myObjPromise.then(myObj => {\n        const positions = myObj.children[0].geometry.attributes.position.array;\n        myObj.scale.x = 100;\n        myObj.scale.y = 100;\n        myObj.scale.z = 100;\n        myObjPromiseOriginal.then(myObj2 => {\n          scene.add(myObj);\n          const positions2 = myObj2.children[0].geometry.attributes.position.array;\n          myObj2.scale.x = 100;\n          myObj2.scale.y = 100;\n          myObj2.scale.z = 100;\n\n          for (let i = 0; i < objSize; i++) {\n            // var offset = 20;\n            var amp = 0.5;\n            var time = window.performance.now();\n            var vertex = new THREE.Vector3(positions2[i * 3], positions2[i * 3 + 1], positions2[i * 3 + 2]);\n            var distance = (noise.noise2D(vertex.x + time * 0.0003, vertex.y + time * 0.0001) + 0) * distortionFr * amp; // positions[i*3] = vertex.x + distance;\n            // positions[i*3+1] = vertex.y + distance;\n\n            positions[i * 3 + 2] = vertex.z + distance * vertex.z;\n          }\n        });\n        myObj.children[0].geometry.attributes.position.needsUpdate = true;\n      });\n      camera.position.x += (mouseX - camera.position.x) * .05;\n      camera.position.y += (-mouseY - camera.position.y) * .05;\n      camera.lookAt(scene.position);\n      renderer.render(scene, camera);\n    };\n\n    animate();\n    resTracker.dispose(); //return () => myObjPromise.remove();\n  }\n\n  dispose() {\n    myObjPromise.then(myObj => {\n      scene.remove(myObj);\n      myObj.children[0].material.dispose();\n      myObj.children[0].geometry.dispose();\n    });\n    myObjPromiseOriginal.then(myObj => {\n      scene.remove(myObj);\n      myObj.children[0].material.dispose();\n      myObj.children[0].geometry.dispose();\n    }); //renderer.renderLists.dispose();\n\n    renderer && renderer.renderLists.dispose();\n    renderer && renderer.dispose(); //renderer.domElement.parentElement.removeChild(renderer.domElement);\t\t\n\n    this.mount.removeChild(renderer.domElement);\n    myObjPromise = null;\n    myObjPromiseOriginal = null;\n    scene = null;\n    camera = null;\n    renderer = null;\n  }\n\n  componentDidMount() {\n    // this.mount.appendChild( renderer.domElement );\n    if (myObjPromise !== undefined) {\n      this.dispose();\n    }\n\n    this.threeObject();\n  }\n\n  componentDidUpdate() {\n    this.dispose();\n    this.threeObject();\n  }\n\n  componentWillUnmount() {\n    this.dispose();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref => this.mount = ref,\n      className: \"object\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ThreeStatic;","map":{"version":3,"sources":["/Users/samo/Documents/VSVU/Fragmenty/fragmenty-web/src/ThreeMusic.js"],"names":["React","THREE","OBJLoader","SimplexNoise","ResourceTracker","constructor","resources","Set","track","resource","Array","isArray","forEach","dispose","Object3D","add","geometry","material","children","Material","value","Object","values","Texture","uniforms","uniformValue","untrack","delete","parent","remove","clear","scene","camera","renderer","myObjPromise","myObjPromiseOriginal","circle","TextureLoader","load","ThreeStatic","Component","props","state","activeId","dataAppToThreeStatic","getDerivedStateFromProps","dataAppToThreeMusic","threeObject","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","alpha","resTracker","bind","position","z","setSize","setPixelRatio","devicePixelRatio","setClearColor","mount","appendChild","domElement","mouseX","mouseY","windowHalfX","windowHalfY","noise","context","AudioContext","analyser","createAnalyser","fftSize","connect","destination","dataArray","Uint8Array","frequencyBinCount","callback","stream","mic","createMediaStreamSource","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","video","audio","console","log","objSize","loadModel","url","Promise","resolve","then","myObj","size","sizeAttenuation","map","alphaTest","transparent","scale","x","y","onWindowResize","aspect","updateProjectionMatrix","onDocumentMouseMove","event","clientX","clientY","document","addEventListener","fractionate","val","minVal","maxVal","modulate","outMin","outMax","fr","delta","animate","requestAnimationFrame","getByteFrequencyData","lowerHalfArray","slice","length","lowerSum","reduce","a","b","lowerLength","lowerAvg","lowerAvgFr","distortionFr","positions","attributes","array","myObj2","positions2","i","amp","time","performance","now","vertex","Vector3","distance","noise2D","needsUpdate","lookAt","render","renderLists","removeChild","componentDidMount","undefined","componentDidUpdate","componentWillUnmount","ref"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as THREE from \"three\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport SimplexNoise from\"simplex-noise\"\nimport \"./three.css\";\n\nclass ResourceTracker {\n    constructor() {\n      this.resources = new Set();\n    }\n    track(resource) {\n      if (!resource) {\n        return resource;\n      }\n  \n      // handle children and when material is an array of materials or\n      // uniform is array of textures\n      if (Array.isArray(resource)) {\n        resource.forEach(resource => this.track(resource));\n        return resource;\n      }\n  \n      if (resource.dispose || resource instanceof THREE.Object3D) {\n        this.resources.add(resource);\n      }\n      if (resource instanceof THREE.Object3D) {\n        this.track(resource.geometry);\n        this.track(resource.material);\n        this.track(resource.children);\n      } else if (resource instanceof THREE.Material) {\n        // We have to check if there are any textures on the material\n        for (const value of Object.values(resource)) {\n          if (value instanceof THREE.Texture) {\n            this.track(value);\n          }\n        }\n        // We also have to check if any uniforms reference textures or arrays of textures\n        if (resource.uniforms) {\n          for (const value of Object.values(resource.uniforms)) {\n            if (value) {\n              const uniformValue = value.value;\n              if (uniformValue instanceof THREE.Texture ||\n                  Array.isArray(uniformValue)) {\n                this.track(uniformValue);\n              }\n            }\n          }\n        }\n      }\n      return resource;\n    }\n    untrack(resource) {\n      this.resources.delete(resource);\n    }\n    dispose() {\n      for (const resource of this.resources) {\n        if (resource instanceof THREE.Object3D) {\n          if (resource.parent) {\n            resource.parent.remove(resource);\n          }\n        }\n        if (resource.dispose) {\n          resource.dispose();\n        }\n      }\n      this.resources.clear();\n    }\n  }\n\nlet scene; // = new THREE.Scene();\nlet camera; // = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\nlet renderer; // = new THREE.WebGLRenderer( { alpha: true } );\n\n//const resTracker;\n\nvar myObjPromise, myObjPromiseOriginal;\n\n// camera.position.z =250;\n\n// renderer.setSize( window.innerWidth, window.innerHeight );\n// renderer.setPixelRatio( window.devicePixelRatio );\n// renderer.setClearColor( 0x000000, 1);\n\nconst circle = new THREE.TextureLoader().load( './data/circle.png' );\n\nclass ThreeStatic extends React.Component {\n\n    constructor(props) {\n        super(props); \n        this.state = {\n            activeId: props.dataAppToThreeStatic,\n            // scene: new THREE.Scene(),\n            // camera: new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 ),\n            // renderer: new THREE.WebGLRenderer( { alpha: true } )\n        }\n        // this.state.camera.position.z =250;\n\n        // this.state.renderer.setSize( window.innerWidth, window.innerHeight );\n        // this.state.renderer.setPixelRatio( window.devicePixelRatio );\n        // this.state.renderer.setClearColor( 0x000000, 1);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return {activeId: props.dataAppToThreeMusic}\n    }\n\n    threeObject() {\n        scene = new THREE.Scene();\n        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );\n        renderer = new THREE.WebGLRenderer( { alpha: true } );\n\n        const resTracker = new ResourceTracker();\n        const track = resTracker.track.bind(resTracker);\n\n        camera.position.z =250;\n\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setClearColor( 0x000000, 1);\n\n        this.mount.appendChild( renderer.domElement );\n        \n\n        // this.state.scene = new THREE.Scene();  // TOTO TREBA OPRAVIT\n        // var scene = this.state.scene;\n        // var camera = this.state.camera;\n        // var renderer = this.state.renderer;\n\n        // this.mount.appendChild( this.state.renderer.domElement );\n\n        var activeId = this.state.activeId;\n\n        var mouseX = 0, mouseY = 0;\n        var windowHalfX = window.innerWidth / 2;\n        var windowHalfY = window.innerHeight / 2;\n\n        var noise = new SimplexNoise();\n\n        // AUDIO\n        var context = new AudioContext();\n        var analyser = context.createAnalyser();\n        analyser.fftSize = 256;\n        analyser.connect(context.destination); \n\n        var dataArray = new Uint8Array(analyser.frequencyBinCount);\n\n        var callback = function(stream) {\n            var mic = context.createMediaStreamSource(stream);\n            mic.connect(analyser);\n        }\n        \n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        navigator.getUserMedia({ video : false, audio : true }, callback, console.log);\n\n\n        //\n        //\n        // OBJ LOADER & MODEL SETUP\n\n        const objSize = 61669;\n\n        var loadModel = function(url) {\n            return new Promise(resolve => {\n                new OBJLoader().load(url, resolve);\n            }); \n        }\n\n        // var myObjPromise, myObjPromiseOriginal;\n\n        if (activeId % 7 === 0) {\n            myObjPromise = track(loadModel('./data/strom-61669.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/strom-61669.obj'));\n        } else if (activeId % 7 === 1) {\n            myObjPromise = track(loadModel('./data/lavicka-61186.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/lavicka-61186.obj'));\n        } else if (activeId % 3 === 2) {\n            myObjPromise = track(loadModel('./data/pozor-48737.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/pozor-48737.obj'));\n        } else if (activeId % 7 === 3) {\n            myObjPromise = track(loadModel('./data/1.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/1.obj'));\n        } else if (activeId % 7 === 4) {\n            myObjPromise = track(loadModel('./data/2.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/2.obj'));\n        } else if (activeId % 7 === 5) {\n            myObjPromise = track(loadModel('./data/3.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/3.obj'));\n        } else {\n            myObjPromise = track(loadModel('./data/4.obj'));\n            myObjPromiseOriginal = track(loadModel('./data/4.obj'));\n        }\n\n        myObjPromise.then(myObj => {\n            var material = myObj.children[0].material;\n\n            material.size = 3;\n            material.sizeAttenuation = true;\n            material.map = circle;\n            material.alphaTest = 0.5;\n            material.transparent = true;\n\n            myObj.scale.x = 100;\n            myObj.scale.y = 100;\n            myObj.scale.z = 100;\n\n            scene.add(myObj);\n            material.dispose();\n        });\n\n        //\n        //\n        // HELPER FUNCTIONS\n\n        var onWindowResize = function() {\n            windowHalfX = window.innerWidth / 2;\n            windowHalfY = window.innerHeight / 2;\n        \n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n        \n            renderer.setSize( window.innerWidth, window.innerHeight );\n        }\n        \n        var onDocumentMouseMove = function(event) {\n            mouseX = ( - event.clientX + windowHalfX ) / 2;\n            mouseY = ( - event.clientY + windowHalfY ) / 2;\n        }\n\n        document.addEventListener( 'mousemove', onDocumentMouseMove );\n        window.addEventListener( 'resize', onWindowResize );\n\n        var fractionate = function(val, minVal, maxVal) {\n            return (val - minVal)/(maxVal - minVal);\n        }\n        \n        var modulate = function(val, minVal, maxVal, outMin, outMax) {\n            var fr = fractionate(val, minVal, maxVal);\n            var delta = outMax - outMin;\n            return outMin + (fr * delta);\n        }\n        \n        //\n        //\n        // ANIMATE\n\n        var animate = function () {\n            requestAnimationFrame( animate );\n            \n            analyser.getByteFrequencyData(dataArray);\n\n\t\t\tvar lowerHalfArray = dataArray.slice(0, (dataArray.length/2) - 1);\n            // var upperHalfArray = dataArray.slice((dataArray.length/2) - 1, dataArray.length - 1);\n            \n            var lowerSum = lowerHalfArray.reduce((a, b) => a + b, 0);\n            var lowerLength = lowerHalfArray.length;\n            var lowerAvg = (lowerSum / lowerLength) || 0;\n            var lowerAvgFr = lowerAvg / lowerLength;\n            var distortionFr = modulate(lowerAvgFr, 0, 1, 0, 4);\n            \n            myObjPromise.then(myObj => {\n\n                const positions = myObj.children[0].geometry.attributes.position.array;\n        \n                myObj.scale.x = 100;\n                myObj.scale.y = 100;\n                myObj.scale.z = 100;\n        \n                myObjPromiseOriginal.then(myObj2 => {\n                    scene.add( myObj );\n                    const positions2 = myObj2.children[0].geometry.attributes.position.array;\n        \n                    myObj2.scale.x = 100;\n                    myObj2.scale.y = 100;\n                    myObj2.scale.z = 100;\n        \n                    for ( let i = 0; i < objSize; i ++ ) {\n                        // var offset = 20;\n                        var amp = 0.5;\n                        var time = window.performance.now();\n        \n                        var vertex = new THREE.Vector3(positions2[i*3], positions2[i*3+1], positions2[i*3+2]);\n        \n                        var distance = (noise.noise2D(vertex.x + time * 0.0003, vertex.y + time * 0.0001) + 0) * distortionFr * amp;\n        \n                        // positions[i*3] = vertex.x + distance;\n                        // positions[i*3+1] = vertex.y + distance;\n                        positions[i*3+2] = vertex.z + (distance*vertex.z);\n                    }\n                });\n        \n                myObj.children[0].geometry.attributes.position.needsUpdate = true;\n            });\n\n            camera.position.x += ( mouseX - camera.position.x ) * .05;\n            camera.position.y += ( - mouseY - camera.position.y ) * .05;\n\n            camera.lookAt( scene.position );\n\n            renderer.render( scene, camera );\n        };\n\n        animate();\n\n        resTracker.dispose();\n\n        //return () => myObjPromise.remove();\n    }\n\n    dispose() {\n        myObjPromise.then(myObj => {\n            scene.remove(myObj);\n            myObj.children[0].material.dispose();\n            myObj.children[0].geometry.dispose();\n        });\n\n        myObjPromiseOriginal.then(myObj => {\n            scene.remove(myObj);\n            myObj.children[0].material.dispose();\n            myObj.children[0].geometry.dispose();\n        });\n\n        //renderer.renderLists.dispose();\n        renderer && renderer.renderLists.dispose();\n        renderer && renderer.dispose();\n\n        //renderer.domElement.parentElement.removeChild(renderer.domElement);\t\t\n        this.mount.removeChild( renderer.domElement );\n\t\t\t\n        myObjPromise = null;\n        myObjPromiseOriginal = null;\n\t\tscene = null;\n        camera = null;\n        renderer = null;\n    }\n\n    componentDidMount() {\n        // this.mount.appendChild( renderer.domElement );\n\n        if (myObjPromise !== undefined) {\n            this.dispose();\n        }\n        \n        this.threeObject();\n    }\n\n    componentDidUpdate() {\n        this.dispose();\n\n        this.threeObject()\n    }\n\n    componentWillUnmount() {\n        this.dispose();\n    }\n\n    render() {\n        return (\n            <div ref={ref => (this.mount = ref)} className = \"object\"/>\n        )\n    } \n}\n\nexport default ThreeStatic;"]},"metadata":{},"sourceType":"module"}